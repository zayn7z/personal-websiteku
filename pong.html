<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game for Fun</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            height: 100vh;
            background-color: rgb(3, 19, 71);
            margin: 0;
            color: white;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 2px solid white;
        }
        #playAgain {
            display: none; /* Sembunyikan teks PLAY AGAIN pada awal */
            font-size: 24px;
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Game Pong Satu Pemain</h1>
    <canvas id="pong" width="600" height="800" style="display: none;"></canvas>
    <div id="playAgain">PLAY AGAIN</div>
    
    <script>
        const canvas = document.getElementById("pong");
        const context = canvas.getContext("2d");
        const playAgainText = document.getElementById("playAgain");

        // Paddle
        const paddleWidth = 100;
        const paddleHeight = 10;
        const paddle = {
            x: canvas.width / 2 - paddleWidth / 2,
            y: canvas.height - paddleHeight - 10,
            width: paddleWidth,
            height: paddleHeight,
            color: "blue"
        };

        // Ball (Gambar orang)
        const ball = {
            x: canvas.width / 2,
            y: 30,
            radius: 30, // Ukuran bola yang lebih besar
            image: new Image(),
            initialVelocityX: 2, // Kecepatan awal horizontal
            initialVelocityY: 2, // Kecepatan awal vertikal
            velocityX: 2,
            velocityY: 2,
            color: "white",
            isMoving: true // Menandakan apakah bola sedang bergerak
        };

        // Ganti dengan URL gambar orang yang bulat
        ball.image.src = 'cute.jpg'; // Ganti dengan URL gambar Anda

        let speedIncreaseInterval; // Interval untuk meningkatkan kecepatan bola
        let score = 0; // Variabel untuk menyimpan skor
        let isPaddleActive = false; // Menandakan apakah penghalang aktif

        // Draw function
        function draw() {
            // Clear canvas
            context.clearRect(0, 0, canvas.width, canvas.height);

            // Draw paddle
            context.fillStyle = paddle.color;
            context.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);

            // Draw ball (gambar orang)
            context.drawImage(ball.image, ball.x - ball.radius, ball.y - ball.radius, ball.radius * 2, ball.radius * 2);

            // Draw score
            drawScore();
        }

        // Function to draw the score
        function drawScore() {
            context.fillStyle = "rgba(255, 255, 255, 0.7)"; // Warna putih dengan transparansi
            context.font = "80px Arial"; // Increased font size to make the score bigger
            context.textAlign = "center";
            context.textBaseline = "middle"; // Center the text vertically as well
            context.fillText(score, canvas.width / 2, canvas.height / 2); // Center the score on the canvas
        }

        // Update function
        function update() {
            if (ball.isMoving) {
                ball.x += ball.velocityX;
                ball.y += ball.velocityY;

                // Ball collision with top
                if (ball.y - ball.radius < 0) {
                    ball.velocityY = -ball.velocityY;
                }

                // Ball collision with paddle
                if (ball.x > paddle.x && ball.x < paddle.x + paddle.width && ball.y + ball.radius > paddle.y) {
                    ball.velocityY = -ball.velocityY;
                    score += 1; // Increase the score by 1 each time the ball hits the paddle
                }

                // Ball falls below paddle
                if (ball.y + ball.radius > canvas.height) {
                    score = 1; // Reset score to 1 when the ball falls below the paddle
                    ball.isMoving = false; // Stop the ball
                    showPlayAgain(); // Show the "Play Again" button
                    clearInterval(speedIncreaseInterval); // Stop the speed increase interval
                }

                // Ball collision with left and right walls
                if (ball.x - ball.radius < 0 || ball.x + ball.radius > canvas.width) {
                    ball.velocityX = -ball.velocityX;
                }
            }
        }

        // Meningkatkan kecepatan bola setiap 15 detik
        function startSpeedIncreaseInterval() {
            speedIncreaseInterval = setInterval(() => {
                if (ball.isMoving) {
                    ball.velocityY *= 1.05; // Meningkatkan kecepatan vertikal
                    ball.velocityX *= 1.05; // Meningkatkan kecepatan horizontal
                }
            }, 15000); // 15 detik
        }

        // Control paddle with mouse/touch only when activated
        function movePaddle(event) {
            if (!isPaddleActive) return; // Jangan gerakkan paddle jika belum aktif

            const mouseX = event.clientX || event.touches[0].clientX; // Get mouse or touch position
            const paddleCenterX = mouseX - canvas.offsetLeft; // Convert mouse position to canvas coordinates

            // Make sure paddle stays within canvas bounds
            paddle.x = Math.max(0, Math.min(paddleCenterX - paddle.width / 2, canvas.width - paddle.width));
        }

        // Add event listeners for mouse and touch
        canvas.addEventListener("mousemove", movePaddle); // For desktop
        canvas.addEventListener("touchmove", movePaddle); // For touch devices

        // Detect if mouse or touch is over the paddle to activate
        function activatePaddle(event) {
            const mouseX = event.clientX || event.touches[0].clientX;
            const mouseY = event.clientY || event.touches[0].clientY;

            // Check if the mouse or touch is over the paddle
            if (mouseX > paddle.x && mouseX < paddle.x + paddle.width && mouseY > paddle.y && mouseY < paddle.y + paddle.height) {
                isPaddleActive = true; // Activate the paddle movement
            }
        }

        // Detect mouse or touch down to activate paddle movement
        canvas.addEventListener("mousedown", activatePaddle); // For mouse
        canvas.addEventListener("touchstart", activatePaddle); // For touch devices

        // Show the game canvas and hide buttons
        function startGame() {
            canvas.style.display = "block";
            playAgainText.style.display = "none"; // Sembunyikan teks PLAY AGAIN
            resetGame();
            startSpeedIncreaseInterval(); // Mulai interval peningkatan kecepatan
            gameLoop();
        }

        // Show the PLAY AGAIN text
        function showPlayAgain() {
            playAgainText.style.display = "block";
        }

        // Reset game state
        function resetGame() {
            paddle.x = canvas.width / 2 - paddleWidth / 2;
            ball.x = canvas.width / 2;
            ball.y = 30;
            ball.velocityX = ball.initialVelocityX; // Reset kecepatan horizontal ke nilai awal
            ball.velocityY = ball.initialVelocityY; // Reset kecepatan vertikal ke nilai awal
            ball.isMoving = true; // Set bola untuk bergerak
            score = 0; // Reset skor
            isPaddleActive = false; // Reset status penghalang
        }

        // Game loop
        function gameLoop() {
            draw();
            update();
            requestAnimationFrame(gameLoop);
        }

        // Event listener for PLAY AGAIN
        playAgainText.addEventListener("click", startGame);

        // Start the game on page load
        startGame();
    </script>
</body>
</html>
